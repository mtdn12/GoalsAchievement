(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{101:function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"a",function(){return a});var r=function(e){return localStorage.setItem("auth",e)},a=function(){return localStorage.getItem("auth")}},103:function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"b",function(){return i});var r=n(10),a=Object(r.fromJS)({todos:[],isLoadingTodos:!1,dailyTodos:[],isLoadingDaily:!1,histories:[],isLoadingHistory:!1,isLoadingAction:!1,isLoadingCheck:{},historyFilter:{page:1,limit:10},historyPages:0}),i="todo"},104:function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"b",function(){return i});var r=n(10),a=Object(r.fromJS)({items:[],isLoadingItems:!1,item:{},isLoadingItem:!1,filter:{status:"reading"}}),i="book"},105:function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"b",function(){return i});var r=n(10),a=Object(r.fromJS)({items:[],isLoadingItems:!1,filter:{isRecall:!1},item:{},isLoadingItem:!1,isLoadingCheck:{}}),i="word"},107:function(e,t,n){"use strict";var r=n(5),a=n(70),i=n(32),o=n(46),c=new(function(){function e(){Object(i.a)(this,e),this._emitChange=null,this._sagas={}}return Object(o.a)(e,[{key:"register",value:function(e,t){this._sagas[e]||(this._sagas=Object(a.a)({},this._sagas,Object(r.a)({},e,t)),this._emitChange&&this._emitChange(t))}},{key:"setChangeListener",value:function(e){this._emitChange=e}}]),e}());t.a=c},12:function(e,t,n){"use strict";n.d(t,"b",function(){return c}),n.d(t,"a",function(){return s});var r=n(23),a=Object(r.createActions)({registerRequest:["values","firebase"],registerSuccess:null,registerFailure:null,loginRequest:["values"],loginSuccess:null,loginFailure:null,socialLoginRequest:["provider"],socialLoginSuccess:null,socialLoginFailure:null,setUser:["user"],clearUser:null}),i=a.Types,o=a.Creators,c=i,s=o},151:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(38),a=function(e){return e[r.b].get("auth")}},22:function(e,t,n){"use strict";n.d(t,"b",function(){return s}),n.d(t,"a",function(){return u});var r=n(23),a=n(61),i=Object(r.createActions)({setModal:["modalType","modalProps"],clearModal:null,showLoadingAction:null,hideLoadingAction:null},{prefix:"@@".concat(a.b,"/")}),o=i.Types,c=i.Creators,s=o,u=c},271:function(e,t,n){e.exports=n(534)},36:function(e,t,n){"use strict";var r=n(14),a=n.n(r),i=n(100),o=n(32),c={apiKey:"AIzaSyDmLhCC7NIQhhJFeuWW483X8ORzrUvdPoE",authDomain:"goals-achievement-8451b.firebaseapp.com",databaseURL:"https://goals-achievement-8451b.firebaseio.com",projectId:"goals-achievement-8451b",storageBucket:"goals-achievement-8451b.appspot.com",messagingSenderId:"779770208723"},s=n(57),u=n.n(s),l=n(101),d=n(39),h=(n(456),new function e(){var t=this;Object(o.a)(this,e),this.getCurrentUser=function(){return t.auth.currentUser},this.doCreateUserWithEmailAndPassword=function(e,n){return t.auth.createUserWithEmailAndPassword(e,n)},this.doSignInWithEmailAndPassword=function(e,n){return t.auth.signInWithEmailAndPassword(e,n)},this.doSignInWithGoogle=function(){return t.auth.signInWithPopup(t.googleProvider)},this.dosSignInWithFaceBook=function(){return t.auth.signInWithPopup(t.facebookProvider)},this.doSignOut=function(){return t.auth.signOut()},this.onIdTokenListener=function(){return t.auth.onIdTokenChanged(function(){var e=Object(i.a)(a.a.mark(function e(n){var r,i;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.auth.currentUser,i="",!r){e.next=6;break}return e.next=5,r.getIdToken();case 5:i=e.sent;case 6:d.a.headers.Authorization=i,Object(l.b)(i);case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}())},u.a.initializeApp(c),this.auth=u.a.auth(),this.googleProvider=new u.a.auth.GoogleAuthProvider,this.facebookProvider=new u.a.auth.FacebookAuthProvider,this.emailAuthProvider=u.a.auth.EmailAuthProvider});t.a=h},38:function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"b",function(){return i});var r=n(10),a=Object(r.fromJS)({auth:null}),i="auth"},39:function(e,t,n){"use strict";var r=n(214),a=n(101),i=Object(r.create)({baseURL:"http://localhost:5000",headers:{Accept:"application/json","Content-Type":"application/json","Access-Control-Allow-Origin":"*",Authorization:Object(a.a)()},timeout:3e3});t.a=i},47:function(e,t,n){"use strict";var r=n(5),a=n(70),i=n(32),o=n(46),c=new(function(){function e(){Object(i.a)(this,e),this._emitChange=null,this._reducers={}}return Object(o.a)(e,[{key:"getReducers",value:function(){return Object(a.a)({},this._reducers)}},{key:"register",value:function(e,t){this._reducers[e]||(this._reducers=Object(a.a)({},this._reducers,Object(r.a)({},e,t)),this._emitChange&&this._emitChange(this.getReducers()))}},{key:"setChangeListener",value:function(e){this._emitChange=e}}]),e}());t.a=c},534:function(e,t,n){"use strict";n.r(t);var r,a=n(14),i=n.n(a),o=n(100),c=n(1),s=n.n(c),u=n(73),l=n.n(u),d=n(216),h=n(33),f=n(102),b=n(211),g=(n(283),n(17)),m=n(218),p=n(71),O=n(212),v=n.n(O),j=n(217),E=n(213),L=n.n(E),w=n(5),I=n(104),S=n(105),_=n(103),x=n(61),A=(r={},Object(w.a)(r,I.b,I.a),Object(w.a)(r,S.b,S.a),Object(w.a)(r,_.b,_.a),Object(w.a)(r,x.b,x.a),r),C=function(e){var t=Object.keys(e);return Object.keys(A).forEach(function(n){-1===t.indexOf(n)&&(e[n]=function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:null})}),Object(g.c)(e)},k=n(107),y=n(4),P=n(12),R=n(39),U=function(e){return R.a.post("api/users/register",e)},T=n(22),N=n(36),G=i.a.mark(F),W=i.a.mark(J),D=i.a.mark(z),M=i.a.mark(H);function F(e){var t,n,r;return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.values,a.prev=1,a.next=4,Object(y.c)(T.a.showLoadingAction());case 4:return a.next=6,N.a.doCreateUserWithEmailAndPassword(t.email,t.password);case 6:if(!(n=a.sent).additionalUserInfo.isNewUser){a.next=11;break}return r={uid:n.user.uid,email:t.email,name:t.name},a.next=11,Object(y.b)(U,r);case 11:return a.next=13,n.user.updateProfile({displayname:t.name});case 13:return a.next=15,Object(y.c)({type:P.b.REGISTER_SUCCESS});case 15:return a.next=17,Object(y.c)(T.a.hideLoadingAction());case 17:return a.next=19,Object(y.c)(T.a.clearModal());case 19:return a.next=21,Object(y.c)(T.a.setModal("LoginModal",{item:{email:t.email,password:t.password}}));case 21:a.next=29;break;case 23:return a.prev=23,a.t0=a.catch(1),a.next=27,Object(y.c)({type:P.b.REGISTER_FAILURE});case 27:return a.next=29,Object(y.c)(T.a.hideLoadingAction());case 29:case"end":return a.stop()}},G,this,[[1,23]])}function J(e){var t,n,r,a;return i.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.values,i.prev=1,i.next=4,Object(y.c)(T.a.showLoadingAction());case 4:return i.next=6,N.a.doSignInWithEmailAndPassword(t.email,t.password);case 6:return n=i.sent,r=n.user,i.next=10,N.a.getCurrentUser().getIdToken(!0);case 10:return a=i.sent,R.a.headers.Authorization=a,i.next=14,Object(y.c)({type:P.b.LOGIN_SUCCESS,user:r});case 14:return i.next=16,Object(y.c)(T.a.hideLoadingAction());case 16:return i.next=18,Object(y.c)(T.a.clearModal());case 18:i.next=26;break;case 20:return i.prev=20,i.t0=i.catch(1),i.next=24,Object(y.c)({type:P.b.LOGIN_FAILURE});case 24:return i.next=26,Object(y.c)(T.a.hideLoadingAction());case 26:case"end":return i.stop()}},W,this,[[1,20]])}function z(e){var t,n,r,a;return i.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.provider,i.prev=1,i.next=4,Object(y.c)(T.a.clearModal());case 4:if("google"!==t){i.next=8;break}return i.next=7,N.a.doSignInWithGoogle();case 7:n=i.sent;case 8:return i.next=10,N.a.getCurrentUser().getIdToken(!0);case 10:if(r=i.sent,R.a.headers.Authorization=r,!n.additionalUserInfo.isNewUser){i.next=16;break}return a={uid:n.user.uid,email:n.user.email,name:n.user.displayName},i.next=16,Object(y.b)(U,a);case 16:return i.next=18,Object(y.c)({type:P.b.SOCIAL_LOGIN_SUCCESS,user:n});case 18:i.next=24;break;case 20:return i.prev=20,i.t0=i.catch(1),i.next=24,Object(y.c)({type:P.b.SOCIAL_LOGIN_FAILURE});case 24:case"end":return i.stop()}},D,this,[[1,20]])}function H(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(y.a)([Object(y.f)(P.b.REGISTER_REQUEST,F),Object(y.f)(P.b.LOGIN_REQUEST,J),Object(y.f)(P.b.SOCIAL_LOGIN_REQUEST,z)]);case 2:case"end":return e.stop()}},M,this)}var X,B,Q=H,q=n(47),V=n(10),K=Object(V.fromJS)({isLoadingAction:!1,isLoadingList:!1,isLoadingItems:{}}),$=n(23),Y=Object($.createActions)({showLoadingAction:null,hideLoadingAction:null,showLoadingList:null,hideLoadingList:null,showLoadingItem:["name"],hideLoadingItem:["name"]},{prefix:"@@".concat("loading","/")}),Z=Y.Types,ee=(Y.Creators,Object($.createReducer)(K,(X={},Object(w.a)(X,Z.SHOW_LOADING_ACTION,function(e){return e.set("isLoadingAction",!0)}),Object(w.a)(X,Z.HIDE_LOADING_ACTION,function(e){return e.set("isLoadingAction",!1)}),Object(w.a)(X,Z.SHOW_LOADING_LIST,function(e){return e.set("isLoadingList",!0)}),Object(w.a)(X,Z.HIDE_LOADING_LIST,function(e){return e.set("isLoadingList",!1)}),Object(w.a)(X,Z.SHOW_LOADING_ITEM,function(e,t){var n=t.name;return e.setIn(["isLoadingItems",n],!0)}),Object(w.a)(X,Z.HIDE_LOADING_ITEM,function(e,t){var n=t.name;return e.setIn(["isLoadingItems",n],!1)}),X))),te=n(38),ne=function(e,t){var n=t.user;return e.set("auth",Object(V.fromJS)(n))},re=Object($.createReducer)(te.a,(B={},Object(w.a)(B,P.b.SET_USER,ne),Object(w.a)(B,P.b.CLEAR_USER,function(e){return te.a}),Object(w.a)(B,P.b.LOGIN_SUCCESS,ne),Object(w.a)(B,P.b.SOCIAL_LOGIN_SUCCESS,ne),B)),ae={transforms:[v()()],key:"root",storage:L.a,blacklist:["router","notification"]},ie=function(e){var t=[],n=[],r=Object(m.a)();t.push(r),t.push(Object(f.routerMiddleware)(e)),n.push(g.a.apply(void 0,t));var a=g.d;"object"===typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__&&(a=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__);var i=C(q.a.getReducers()),o=Object(p.persistReducer)(ae,i),c=Object(g.e)(o,A,a.apply(void 0,n)),s=Object(p.persistStore)(c);return c.persistor=s,k.a.setChangeListener(function(e){r.run(e)}),k.a.register(te.b,Q),q.a.setChangeListener(function(e){c.replaceReducer(Object(p.persistReducer)(ae,C(e)))}),q.a.register("router",Object(j.a)(e)),q.a.register("loading",ee),q.a.register(te.b,re),c},oe=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ce(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}var se=n(49),ue=n(58),le=n(151),de=Object(h.connect)(function(e){return{auth:Object(le.a)(e)}})(function(e){var t=e.component,n=e.auth,r=Object(ue.a)(e,["component","auth"]);return s.a.createElement(se.Route,Object.assign({},r,{render:function(e){var r=e.location,a=Object(ue.a)(e,["location"]);return n?s.a.createElement(t,Object.assign({location:r},a)):s.a.createElement(se.Redirect,{to:{pathname:"/welcome",state:{from:r}}})}}))}),he=n(32),fe=n(46),be=n(148),ge=n(146),me=n(149),pe=function(e){var t=e.children,n=Object(ue.a)(e,["children"]);return s.a.createElement("div",n,t)},Oe=function(e){function t(){var e,n;Object(he.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(be.a)(this,(e=Object(ge.a)(t)).call.apply(e,[this].concat(a)))).state={hasError:!1},n}return Object(me.a)(t,e),Object(fe.a)(t,[{key:"componentDidCatch",value:function(e,t){this.setState({hasError:!0})}},{key:"render",value:function(){return this.state.hasError?s.a.createElement(pe,null,"Something is wrong here! Please try refresh."):this.props.children}}]),t}(c.PureComponent),ve=n(21),je=n.n(ve),Ee=n(536),Le=function(e){if(e.error)throw console.log(e.error),new Error("Couldn't load LoadingPage");return s.a.createElement(pe,null,s.a.createElement(Ee.a,{active:!0,inline:"centered"}))},we=je()({loader:function(){return Promise.all([n.e(0),n.e(3),n.e(6)]).then(n.bind(null,893))},loading:Le}),Ie=je()({loader:function(){return Promise.all([n.e(0),n.e(1),n.e(4),n.e(2),n.e(19)]).then(n.bind(null,879))},loading:Le}),Se=je()({loader:function(){return Promise.all([n.e(0),n.e(1),n.e(4),n.e(2),n.e(15)]).then(n.bind(null,885))},loading:Le}),_e=je()({loader:function(){return Promise.all([n.e(0),n.e(1),n.e(3),n.e(2),n.e(16)]).then(n.bind(null,894))},loading:Le}),xe=je()({loader:function(){return Promise.all([n.e(0),n.e(1),n.e(4),n.e(5),n.e(12)]).then(n.bind(null,887))},loading:Le}),Ae=je()({loader:function(){return Promise.all([n.e(0),n.e(1),n.e(3),n.e(2),n.e(18)]).then(n.bind(null,895))},loading:Le}),Ce=je()({loader:function(){return Promise.all([n.e(0),n.e(1),n.e(4),n.e(2),n.e(14)]).then(n.bind(null,896))},loading:Le}),ke=je()({loader:function(){return Promise.all([n.e(0),n.e(1),n.e(3),n.e(2),n.e(13)]).then(n.bind(null,897))},loading:Le}),ye=je()({loader:function(){return Promise.all([n.e(0),n.e(1),n.e(3),n.e(5),n.e(11)]).then(n.bind(null,881))},loading:Le}),Pe=je()({loader:function(){return Promise.all([n.e(0),n.e(1),n.e(4),n.e(5),n.e(10)]).then(n.bind(null,889))},loading:Le}),Re=je()({loader:function(){return Promise.all([n.e(0),n.e(1),n.e(3),n.e(2),n.e(17)]).then(n.bind(null,898))},loading:Le}),Ue=function(){return s.a.createElement(Oe,null,s.a.createElement(se.Switch,null,s.a.createElement(se.Redirect,{exact:!0,from:"/",to:"/book"}),s.a.createElement(de,{path:"/book",exact:!0,component:Se}),s.a.createElement(de,{path:"/book/:id",exact:!0,component:_e}),s.a.createElement(de,{path:"/word",exact:!0,component:xe}),s.a.createElement(de,{path:"/todo",exact:!0,component:Ce}),s.a.createElement(de,{path:"/todo/daily",exact:!0,component:ke}),s.a.createElement(de,{path:"/todo/history",exact:!0,component:ye}),s.a.createElement(de,{path:"/diary",exact:!0,component:Pe}),s.a.createElement(de,{path:"/diary/:id",exact:!0,component:Re}),s.a.createElement(de,{path:"/word/:id",exact:!0,component:Ae}),s.a.createElement(se.Route,{path:"/welcome",exact:!0,component:Ie}),s.a.createElement(se.Route,{component:we})))},Te=s.a.createContext(null),Ne=N.a,Ge=Object(d.a)();function We(){return(We=Object(o.a)(i.a.mark(function e(){var t,n,r;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=ie(Ge),n=document.getElementById("root"),r=function(){return l.a.render(s.a.createElement(h.Provider,{store:t},s.a.createElement(b.PersistGate,{loading:s.a.createElement("div",null),persistor:t.persistor},s.a.createElement(f.ConnectedRouter,{history:Ge},s.a.createElement(Te.Provider,{value:Ne},s.a.createElement(Ue,null))))),n)},Ne.onIdTokenListener(),r();case 6:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}!function(){We.apply(this,arguments)}(),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("","/service-worker.js");oe?function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):ce(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e):ce(e)})}}()},61:function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"b",function(){return i});var r=n(10),a=Object(r.fromJS)({modal:null,isLoadingAction:!1}),i="modal"}},[[271,8,9]]]);
//# sourceMappingURL=main.875e976f.chunk.js.map