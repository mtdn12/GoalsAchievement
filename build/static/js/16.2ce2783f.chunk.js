(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{537:function(e,t,n){"use strict";n.d(t,"b",function(){return s}),n.d(t,"a",function(){return u});var a=n(23),r=n(546),c=Object(a.createActions)({showNotification:["title","message","color"],hideNotification:null},{prefix:"@@".concat(r.b,"/")}),o=c.Types,i=c.Creators,s=o,u=i},546:function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return c});var a=n(10),r=Object(a.Map)({title:"",message:"",open:!1,color:"blue"}),c="notification"},562:function(e,t,n){e.exports={messageWrapper:"styles_messageWrapper__1FvZ9"}},563:function(e,t,n){"use strict";var a,r=n(32),c=n(46),o=n(148),i=n(146),s=n(149),u=n(1),b=n.n(u),l=n(33),d=n(17),p=n(5),f=n(546),E=n(23),m=n(537),O=n(47),j=Object(E.createReducer)(f.a,(a={},Object(p.a)(a,m.b.SHOW_NOTIFICATION,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f.a,t=arguments.length>1?arguments[1]:void 0,n=t.title,a=t.message,r=t.color;return e.merge({title:n,message:a,color:r,open:!0})}),Object(p.a)(a,m.b.HIDE_NOTIFICATION,function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:f.a).merge({open:!1})}),a));O.a.register(f.b,j);var v=n(890),h=n(886),_=n(562),g=n.n(_),w=function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,c=new Array(a),s=0;s<a;s++)c[s]=arguments[s];return(n=Object(o.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(c)))).state={animation:"fade up",duration:500},n}return Object(s.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props,t=e.open,n=e.onClose,a=e.color,r=e.message,c=e.title,o=this.state,i=o.animation,s=o.duration;return b.a.createElement(v.a,{closeOnTriggerClick:!0,open:t,transition:{animation:i,duration:s},onClose:n},b.a.createElement(h.a,{color:a,attached:"top",className:g.a.messageWrapper,onDismiss:n,header:c,content:r}))}}]),t}(u.Component),x=function(e){function t(){return Object(r.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return b.a.createElement(w,this.props)}}]),t}(b.a.Component);x.propsTypes={};var T=Object(l.connect)(function(e){return{open:e.notification.get("open"),title:e.notification.get("title"),message:e.notification.get("message"),color:e.notification.get("color")}},function(e){return{onClose:function(){return e(m.a.hideNotification())}}});t.a=Object(d.d)(T)(x)},572:function(e,t,n){e.exports={wrapper:"styles_wrapper__2rJf3",contentWrapper:"styles_contentWrapper__38BTI"}},573:function(e,t,n){e.exports={appBar:"styles_appBar__3pmVF"}},575:function(e,t,n){"use strict";var a=n(58),r=n(1),c=n.n(r),o=n(563),i=n(572),s=n.n(i),u=n(560),b=n(892),l=n(699),d=n(573),p=n.n(d);var f=function(e){var t=e.handleGoBack,n=e.title;return c.a.createElement(b.a,{borderless:!0,fixed:"top",className:p.a.appBar,color:"blue",inverted:!0},c.a.createElement(b.a.Item,{onClick:t},c.a.createElement(l.a,{name:"arrow left"})),c.a.createElement(b.a.Item,{header:!0,as:"h4"},n))},E=n(49);t.a=Object(E.withRouter)(function(e){var t=e.title,n=e.handleGoBack,r=e.children;Object(a.a)(e,["title","handleGoBack","children"]);return c.a.createElement("div",{className:s.a.wrapper},c.a.createElement(f,{title:t,handleGoBack:n}),c.a.createElement("main",{className:s.a.contentWrapper},r),c.a.createElement(o.a,null),c.a.createElement(u.a,null))})},604:function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"e",function(){return c}),n.d(t,"a",function(){return o}),n.d(t,"d",function(){return i}),n.d(t,"c",function(){return s});var a=n(104),r=function(e){return e[a.b].get("items")},c=function(e){return e[a.b].get("isLoadingItems")},o=function(e){return e[a.b].get("item")},i=function(e){return e[a.b].get("isLoadingItem")},s=function(e){return e[a.b].get("filter")}},646:function(e,t,n){"use strict";var a,r=n(5),c=n(10),o=n(104),i=n(23),s=n(548),u=n(47),b=Object(i.createReducer)(o.a,(a={},Object(r.a)(a,s.b.GET_ITEMS_REQUEST,function(e){return e.set("isLoadingItems",!0)}),Object(r.a)(a,s.b.GET_ITEMS_FAILURE,function(e){return e.set("isLoadingItems",!1)}),Object(r.a)(a,s.b.GET_ITEMS_SUCCESS,function(e,t){var n=t.items;return e.set("items",Object(c.fromJS)(n)).set("isLoadingItems",!1)}),Object(r.a)(a,s.b.CLEAR_ITEMS,function(e){return e.set("items",Object(c.fromJS)([]))}),Object(r.a)(a,s.b.GET_ITEM_REQUEST,function(e){return e.set("isLoadingItem",!0)}),Object(r.a)(a,s.b.GET_ITEM_SUCCESS,function(e,t){var n=t.item;return e.set("item",Object(c.fromJS)(n)).set("isLoadingItem",!1)}),Object(r.a)(a,s.b.GET_ITEM_FAILURE,function(e){return e.set("isLoadingItem",!1)}),Object(r.a)(a,s.b.CLEAR_ITEM,function(e){return e.set("item",Object(c.fromJS)({}))}),Object(r.a)(a,s.b.SET_FILTER,function(e,t){var n=t.name,a=t.value;return e.setIn(["filter",n],a)}),a));u.a.register(o.b,b)},652:function(e,t,n){"use strict";var a=n(58),r=n(14),c=n.n(r),o=n(4),i=n(548),s=n(537),u=n(22),b=n(39),l=function(e){return b.a.get("/api/books/",e)},d=function(e){return b.a.get("/api/books/".concat(e))},p=function(e,t){return b.a.post("/api/books/",t)},f=function(e,t){return b.a.put("/api/books/".concat(e),t)},E=function(e){return b.a.delete("/api/books/".concat(e))},m=function(e,t){return b.a.put("/api/books/status/".concat(e),{status:t})},O=function(e,t){return b.a.put("/api/books/review/".concat(e),t)},j=n(604),v=n(107),h=n(104),_=c.a.mark(R),g=c.a.mark(A),w=c.a.mark(C),x=c.a.mark(M),T=c.a.mark(y),I=c.a.mark(L),k=c.a.mark(U),S=c.a.mark(N);function R(e){var t,n;return c.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.filter,a.prev=1,a.next=4,Object(o.b)(l,t);case 4:if("fail"!==(n=a.sent).data.result){a.next=7;break}throw new Error(n.error);case 7:return a.next=9,Object(o.c)({type:i.b.GET_ITEMS_SUCCESS,items:n.data.items});case 9:a.next=15;break;case 11:return a.prev=11,a.t0=a.catch(1),a.next=15,Object(o.c)({type:i.b.GET_ITEMS_FAILURE});case 15:case"end":return a.stop()}},_,this,[[1,11]])}function A(e){var t,n,a;return c.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.values,r.prev=1,r.next=4,Object(o.c)(u.a.showLoadingAction());case 4:return r.next=6,Object(o.b)(p,t);case 6:if("fail"!==(n=r.sent).data.result){r.next=9;break}throw new Error(n.data.error);case 9:return r.next=11,Object(o.c)({type:i.b.CREATE_ITEM_SUCCESS});case 11:return r.next=13,Object(o.d)(j.c);case 13:if((a=r.sent).get("status")!==t.status){r.next=17;break}return r.next=17,Object(o.c)(i.a.getItemsRequest(a.toJS()));case 17:return r.next=19,Object(o.c)(s.a.showNotification("Create book","Create book success","blue"));case 19:return r.next=21,Object(o.c)(u.a.hideLoadingAction());case 21:return r.next=23,Object(o.c)(u.a.clearModal());case 23:r.next=33;break;case 25:return r.prev=25,r.t0=r.catch(1),r.next=29,Object(o.c)({type:i.b.CREATE_ITEM_FAILURE});case 29:return r.next=31,Object(o.c)(s.a.showNotification("Create book",r.t0.message,"red"));case 31:return r.next=33,Object(o.c)(u.a.hideLoadingAction());case 33:case"end":return r.stop()}},g,this,[[1,25]])}function C(e){var t,n,r,b,l;return c.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.values,c.prev=1,c.next=4,Object(o.c)(u.a.showLoadingAction());case 4:return n=t.id,r=Object(a.a)(t,["id"]),c.next=7,Object(o.b)(f,n,r);case 7:if("fail"!==(b=c.sent).data.result){c.next=10;break}throw new Error(b.data.error);case 10:return c.next=12,Object(o.c)({type:i.b.EDIT_ITEM_SUCCESS});case 12:return c.next=14,Object(o.d)(j.c);case 14:return l=c.sent,c.next=17,Object(o.c)(i.a.getItemsRequest(l.toJS()));case 17:return c.next=19,Object(o.c)(s.a.showNotification("Edit book","Edit book success","blue"));case 19:return c.next=21,Object(o.c)(u.a.hideLoadingAction());case 21:return c.next=23,Object(o.c)(u.a.clearModal());case 23:c.next=33;break;case 25:return c.prev=25,c.t0=c.catch(1),c.next=29,Object(o.c)({type:i.b.EDIT_ITEM_FAILURE});case 29:return c.next=31,Object(o.c)(s.a.showNotification("Edit book",c.t0.message,"red"));case 31:return c.next=33,Object(o.c)(u.a.hideLoadingAction());case 33:case"end":return c.stop()}},w,this,[[1,25]])}function M(e){var t,n,a;return c.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.values,r.prev=1,r.next=4,Object(o.c)(u.a.showLoadingAction());case 4:return r.next=6,Object(o.b)(E,t._id);case 6:if("fail"!==(n=r.sent).data.result){r.next=9;break}throw new Error(n.data.error);case 9:return r.next=11,Object(o.c)({type:i.b.DELETE_ITEM_SUCCESS});case 11:return r.next=13,Object(o.d)(j.c);case 13:return a=r.sent,r.next=16,Object(o.c)(i.a.getItemsRequest(a.toJS()));case 16:return r.next=18,Object(o.c)(s.a.showNotification("Delete book","Delete book success","blue"));case 18:return r.next=20,Object(o.c)(u.a.hideLoadingAction());case 20:return r.next=22,Object(o.c)(u.a.clearModal());case 22:r.next=32;break;case 24:return r.prev=24,r.t0=r.catch(1),r.next=28,Object(o.c)({type:i.b.DELETE_ITEM_FAILURE});case 28:return r.next=30,Object(o.c)(s.a.showNotification("Delete book",r.t0.message,"red"));case 30:return r.next=32,Object(o.c)(u.a.hideLoadingAction());case 32:case"end":return r.stop()}},x,this,[[1,24]])}function y(e){var t,n,a,r;return c.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.id,n=e.status,c.prev=1,c.next=4,Object(o.b)(m,t,n);case 4:if("fail"!==(a=c.sent).data.result){c.next=7;break}throw new Error(a.data.error);case 7:return c.next=9,Object(o.c)({type:i.b.CHANGE_STATUS_SUCCESS});case 9:return c.next=11,Object(o.d)(j.c);case 11:return r=c.sent,c.next=14,Object(o.c)(i.a.getItemsRequest(r.toJS()));case 14:return c.next=16,Object(o.c)(s.a.showNotification("Change status","Change status success","blue"));case 16:c.next=24;break;case 18:return c.prev=18,c.t0=c.catch(1),c.next=22,Object(o.c)({type:i.b.CHANGE_STATUS_FAILURE});case 22:return c.next=24,Object(o.c)(s.a.showNotification("change status",c.t0.message,"red"));case 24:case"end":return c.stop()}},T,this,[[1,18]])}function L(e){var t,n;return c.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.id,a.prev=1,a.next=4,Object(o.b)(d,t);case 4:if(n=a.sent,console.log(n.data),"fail"!==n.data.result){a.next=8;break}throw new Error(n.data.error);case 8:return a.next=10,Object(o.c)({type:i.b.GET_ITEM_SUCCESS,item:n.data.item});case 10:a.next=16;break;case 12:return a.prev=12,a.t0=a.catch(1),a.next=16,Object(o.c)({type:i.b.GET_ITEM_FAILURE});case 16:case"end":return a.stop()}},I,this,[[1,12]])}function U(e){var t,n,r,b;return c.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.values,c.prev=1,c.next=4,Object(o.c)(u.a.showLoadingAction());case 4:return n=t.id,r=Object(a.a)(t,["id"]),c.next=7,Object(o.b)(O,n,r);case 7:if("fail"!==(b=c.sent).data.result){c.next=10;break}throw new Error(b.data.error);case 10:return c.next=12,Object(o.c)({type:i.b.ADD_REVIEW_SUCCESS});case 12:return c.next=14,Object(o.c)(i.a.getItemRequest(n));case 14:return c.next=16,Object(o.c)(s.a.showNotification("Add review","Add review success","blue"));case 16:return c.next=18,Object(o.c)(u.a.hideLoadingAction());case 18:return c.next=20,Object(o.c)(u.a.clearModal());case 20:c.next=30;break;case 22:return c.prev=22,c.t0=c.catch(1),c.next=26,Object(o.c)({type:i.b.ADD_REVIEW_FAILURE});case 26:return c.next=28,Object(o.c)(s.a.showNotification("add Review",c.t0.message,"red"));case 28:return c.next=30,Object(o.c)(u.a.hideLoadingAction());case 30:case"end":return c.stop()}},k,this,[[1,22]])}function N(){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(o.a)([Object(o.f)(i.b.GET_ITEMS_REQUEST,R),Object(o.f)(i.b.CREATE_ITEM_REQUEST,A),Object(o.f)(i.b.EDIT_ITEM_REQUEST,C),Object(o.f)(i.b.DELETE_ITEM_REQUEST,M),Object(o.f)(i.b.CHANGE_STATUS_REQUEST,y),Object(o.f)(i.b.GET_ITEM_REQUEST,L),Object(o.f)(i.b.ADD_REVIEW_REQUEST,U)]);case 2:case"end":return e.stop()}},S,this)}v.a.register(h.b,N)},850:function(e,t,n){e.exports={bookWrap:"styles_bookWrap__U6EGG",title:"styles_title__2_F-X",subTitle:"styles_subTitle__3oCoH",reviewWrap:"styles_reviewWrap__3s2V5",review:"styles_review__1mQqS"}},894:function(e,t,n){"use strict";n.r(t);var a=n(32),r=n(46),c=n(148),o=n(146),i=n(149),s=n(1),u=n.n(s),b=n(33),l=n(17),d=(n(652),n(646),n(548)),p=n(22),f=n(604),E=n(536),m=n(888),O=n(698),j=n(850),v=n.n(j),h=n(575),_=function(e){var t=e.handleGoBack,n=e.item,a=e.isLoadingItem,r=e.openModalAddReview,c=e.openModalEditReview;return console.log(n.get("review")),u.a.createElement(h.a,{title:"Book Detail",handleGoBack:t},a&&u.a.createElement(E.a,{active:!0,inline:"centered",size:"big"}),!a&&n&&u.a.createElement("div",{className:v.a.bookWrap},u.a.createElement("div",{className:v.a.infoWrap},u.a.createElement("p",{className:v.a.title},n.get("title")),u.a.createElement("p",{className:v.a.subTitle},n.get("author"))),u.a.createElement("div",{className:v.a.reviewWrap},n.get("review")?u.a.createElement(m.a,{primary:!0,fluid:!0,onClick:c},"Change Review"):u.a.createElement(m.a,{primary:!0,fluid:!0,onClick:r},"Create Review"),u.a.createElement("div",{className:v.a.review},n.get("review")?u.a.createElement("div",null,u.a.createElement(O.a,{color:"blue",ribbon:!0},n.get("rate")),u.a.createElement("pre",null,n.get("review"))):u.a.createElement("p",null,"No review Yet")))))},g=function(e){function t(){var e,n;Object(a.a)(this,t);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return(n=Object(c.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(i)))).handleGoBack=function(){n.props.history.push("/book")},n.openModalAddReview=function(){var e=n.props,t=e.item;(0,e.openModal)("AddEditReviewModal",{item:{id:t.get("_id"),review:"",rate:""},action:"create"})},n.openModalEditReview=function(){var e=n.props,t=e.item;(0,e.openModal)("AddEditReviewModal",{item:{id:t.get("_id"),review:t.get("review"),rate:t.get("rate")},action:"edit"})},n}return Object(i.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.match;(0,e.getItemRequest)(t.params.id)}},{key:"componentWillUnmount",value:function(){(0,this.props.clearItem)()}},{key:"render",value:function(){return u.a.createElement(_,Object.assign({openModalAddReview:this.openModalAddReview,openModalEditReview:this.openModalEditReview,handleGoBack:this.handleGoBack},this.props))}}]),t}(s.Component),w=Object(b.connect)(function(e){return{item:Object(f.a)(e),isLoadingItem:Object(f.d)(e)}},function(e){return{getItemRequest:function(t){return e(d.a.getItemRequest(t))},clearItem:function(){return e(d.a.clearItem())},openModal:function(t,n){return e(p.a.setModal(t,n))}}});t.default=Object(l.d)(w)(g)}}]);
//# sourceMappingURL=16.2ce2783f.chunk.js.map