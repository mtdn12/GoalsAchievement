(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{116:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(35),a=function(e){return e[r.b].get("auth")}},14:function(e,t,n){"use strict";n.d(t,"b",function(){return c}),n.d(t,"a",function(){return s});var r=n(22),a=Object(r.createActions)({registerRequest:["values","firebase"],registerSuccess:null,registerFailure:null,loginRequest:["values"],loginSuccess:null,loginFailure:null,socialLoginRequest:["provider"],socialLoginSuccess:null,socialLoginFailure:null,setUser:["user"],clearUser:null}),i=a.Types,o=a.Creators,c=i,s=o},161:function(e,t,n){e.exports=n(359)},21:function(e,t,n){"use strict";n.d(t,"b",function(){return s}),n.d(t,"a",function(){return u});var r=n(22),a=n(52),i=Object(r.createActions)({setModal:["modalType","modalProps"],clearModal:null,showLoadingAction:null,hideLoadingAction:null},{prefix:"@@".concat(a.b,"/")}),o=i.Types,c=i.Creators,s=o,u=c},33:function(e,t,n){"use strict";var r=n(13),a=n.n(r),i=n(81),o=n(30),c={apiKey:"AIzaSyDmLhCC7NIQhhJFeuWW483X8ORzrUvdPoE",authDomain:"goals-achievement-8451b.firebaseapp.com",databaseURL:"https://goals-achievement-8451b.firebaseio.com",projectId:"goals-achievement-8451b",storageBucket:"goals-achievement-8451b.appspot.com",messagingSenderId:"779770208723"},s=n(41),u=n.n(s),l=n(82),d=n(36),h=(n(344),n(360),new function e(){var t=this;Object(o.a)(this,e),this.getCurrentUser=function(){return t.auth.currentUser},this.doCreateUserWithEmailAndPassword=function(e,n){return t.auth.createUserWithEmailAndPassword(e,n)},this.doSignInWithEmailAndPassword=function(e,n){return t.auth.signInWithEmailAndPassword(e,n)},this.doSignInWithGoogle=function(){return t.auth.signInWithPopup(t.googleProvider)},this.dosSignInWithFaceBook=function(){return t.auth.signInWithPopup(t.facebookProvider)},this.doSignOut=function(){return t.auth.signOut()},this.doUploadImage=function(e,n){return t.storageRef.child(n).put(e)},this.doDeleteFile=function(e){return t.storageRef.child(e).delete()},this.onIdTokenListener=function(){return t.auth.onIdTokenChanged(function(){var e=Object(i.a)(a.a.mark(function e(n){var r,i;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.auth.currentUser,i="",!r){e.next=6;break}return e.next=5,r.getIdToken();case 5:i=e.sent;case 6:d.a.headers.Authorization=i,Object(l.b)(i);case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())},u.a.initializeApp(c),this.auth=u.a.auth(),this.storageRef=u.a.storage().ref(),this.googleProvider=new u.a.auth.GoogleAuthProvider,this.facebookProvider=new u.a.auth.FacebookAuthProvider,this.emailAuthProvider=u.a.auth.EmailAuthProvider});t.a=h},35:function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"b",function(){return i});var r=n(9),a=Object(r.fromJS)({auth:null}),i="auth"},358:function(e,t,n){},359:function(e,t,n){"use strict";n.r(t);var r,a=n(13),i=n.n(a),o=n(81),c=n(1),s=n.n(c),u=n(63),l=n.n(u),d=n(28),h=n(31),f=n(83),m=n(151),g=(n(171),n(16)),b=n(155),p=n(61),O=n(152),v=n.n(O),j=n(117),E=n(153),L=n.n(E),w=n(6),I=n(84),S=n(85),_=n(86),x=n(52),A=n(87),C=(r={},Object(w.a)(r,I.b,I.a),Object(w.a)(r,S.b,S.a),Object(w.a)(r,_.b,_.a),Object(w.a)(r,x.b,x.a),Object(w.a)(r,A.b,A.a),r),k=function(e){var t=Object.keys(e);return Object.keys(C).forEach(function(n){-1===t.indexOf(n)&&(e[n]=function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:null})}),Object(g.c)(e)},y=n(88),R=n(5),P=n(14),U=n(36),T=function(e){return U.a.post("api/users/register",e)},N=n(21),G=n(33),W=i.a.mark(J),D=i.a.mark(z),M=i.a.mark(H),F=i.a.mark(X);function J(e){var t,n,r;return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.values,a.prev=1,a.next=4,Object(R.c)(N.a.showLoadingAction());case 4:return a.next=6,G.a.doCreateUserWithEmailAndPassword(t.email,t.password);case 6:if(!(n=a.sent).additionalUserInfo.isNewUser){a.next=11;break}return r={uid:n.user.uid,email:t.email,name:t.name},a.next=11,Object(R.b)(T,r);case 11:return a.next=13,n.user.updateProfile({displayname:t.name});case 13:return a.next=15,Object(R.c)({type:P.b.REGISTER_SUCCESS});case 15:return a.next=17,Object(R.c)(N.a.hideLoadingAction());case 17:return a.next=19,Object(R.c)(N.a.clearModal());case 19:return a.next=21,Object(R.c)(N.a.setModal("LoginModal",{item:{email:t.email,password:t.password}}));case 21:a.next=29;break;case 23:return a.prev=23,a.t0=a.catch(1),a.next=27,Object(R.c)({type:P.b.REGISTER_FAILURE});case 27:return a.next=29,Object(R.c)(N.a.hideLoadingAction());case 29:case"end":return a.stop()}},W,null,[[1,23]])}function z(e){var t,n,r,a;return i.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.values,i.prev=1,i.next=4,Object(R.c)(N.a.showLoadingAction());case 4:return i.next=6,G.a.doSignInWithEmailAndPassword(t.email,t.password);case 6:return n=i.sent,r=n.user,i.next=10,G.a.getCurrentUser().getIdToken(!0);case 10:return a=i.sent,U.a.headers.Authorization=a,i.next=14,Object(R.c)({type:P.b.LOGIN_SUCCESS,user:r});case 14:return i.next=16,Object(R.c)(N.a.hideLoadingAction());case 16:return i.next=18,Object(R.c)(N.a.clearModal());case 18:i.next=26;break;case 20:return i.prev=20,i.t0=i.catch(1),i.next=24,Object(R.c)({type:P.b.LOGIN_FAILURE});case 24:return i.next=26,Object(R.c)(N.a.hideLoadingAction());case 26:case"end":return i.stop()}},D,null,[[1,20]])}function H(e){var t,n,r,a;return i.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.provider,i.prev=1,i.next=4,Object(R.c)(N.a.clearModal());case 4:if("google"!==t){i.next=8;break}return i.next=7,G.a.doSignInWithGoogle();case 7:n=i.sent;case 8:return i.next=10,G.a.getCurrentUser().getIdToken(!0);case 10:if(r=i.sent,U.a.headers.Authorization=r,!n.additionalUserInfo.isNewUser){i.next=16;break}return a={uid:n.user.uid,email:n.user.email,name:n.user.displayName},i.next=16,Object(R.b)(T,a);case 16:return i.next=18,Object(R.c)({type:P.b.SOCIAL_LOGIN_SUCCESS,user:n});case 18:i.next=24;break;case 20:return i.prev=20,i.t0=i.catch(1),i.next=24,Object(R.c)({type:P.b.SOCIAL_LOGIN_FAILURE});case 24:case"end":return i.stop()}},M,null,[[1,20]])}function X(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(R.a)([Object(R.f)(P.b.REGISTER_REQUEST,J),Object(R.f)(P.b.LOGIN_REQUEST,z),Object(R.f)(P.b.SOCIAL_LOGIN_REQUEST,H)]);case 2:case"end":return e.stop()}},F)}var B,Q,q=X,V=n(44),K=n(9),$=Object(K.fromJS)({isLoadingAction:!1,isLoadingList:!1,isLoadingItems:{}}),Y=n(22),Z=Object(Y.createActions)({showLoadingAction:null,hideLoadingAction:null,showLoadingList:null,hideLoadingList:null,showLoadingItem:["name"],hideLoadingItem:["name"]},{prefix:"@@".concat("loading","/")}),ee=Z.Types,te=(Z.Creators,Object(Y.createReducer)($,(B={},Object(w.a)(B,ee.SHOW_LOADING_ACTION,function(e){return e.set("isLoadingAction",!0)}),Object(w.a)(B,ee.HIDE_LOADING_ACTION,function(e){return e.set("isLoadingAction",!1)}),Object(w.a)(B,ee.SHOW_LOADING_LIST,function(e){return e.set("isLoadingList",!0)}),Object(w.a)(B,ee.HIDE_LOADING_LIST,function(e){return e.set("isLoadingList",!1)}),Object(w.a)(B,ee.SHOW_LOADING_ITEM,function(e,t){var n=t.name;return e.setIn(["isLoadingItems",n],!0)}),Object(w.a)(B,ee.HIDE_LOADING_ITEM,function(e,t){var n=t.name;return e.setIn(["isLoadingItems",n],!1)}),B))),ne=n(35),re=function(e,t){var n=t.user;return e.set("auth",Object(K.fromJS)(n))},ae=Object(Y.createReducer)(ne.a,(Q={},Object(w.a)(Q,P.b.SET_USER,re),Object(w.a)(Q,P.b.CLEAR_USER,function(e){return ne.a}),Object(w.a)(Q,P.b.LOGIN_SUCCESS,re),Object(w.a)(Q,P.b.SOCIAL_LOGIN_SUCCESS,re),Q)),ie={transforms:[v()()],key:"root",storage:L.a,blacklist:["router","notification"]},oe=function(e){var t=[],n=[],r=Object(b.a)();t.push(r),t.push(Object(f.routerMiddleware)(e)),n.push(g.a.apply(void 0,t));var a=g.d;"object"===typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__&&(a=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__);var i=k(V.a.getReducers()),o=Object(p.persistReducer)(ie,i),c=Object(g.e)(o,C,a.apply(void 0,n)),s=Object(p.persistStore)(c);return c.persistor=s,y.a.setChangeListener(function(e){r.run(e)}),y.a.register(ne.b,q),V.a.setChangeListener(function(e){c.replaceReducer(Object(p.persistReducer)(ie,k(e)))}),V.a.register("router",Object(j.a)(e)),V.a.register("loading",te),V.a.register(ne.b,ae),c},ce=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function se(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}var ue=n(43),le=n(51),de=n(116),he=Object(h.connect)(function(e){return{auth:Object(de.a)(e)}})(function(e){var t=e.component,n=e.auth,r=Object(le.a)(e,["component","auth"]);return s.a.createElement(ue.Route,Object.assign({},r,{render:function(e){var r=e.location,a=Object(le.a)(e,["location"]);return n?s.a.createElement(t,Object.assign({location:r},a)):s.a.createElement(ue.Redirect,{to:{pathname:"/welcome",state:{from:r}}})}}))}),fe=n(30),me=n(42),ge=n(114),be=n(113),pe=n(115),Oe=function(e){var t=e.children,n=Object(le.a)(e,["children"]);return s.a.createElement("div",n,t)},ve=function(e){function t(){var e,n;Object(fe.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(ge.a)(this,(e=Object(be.a)(t)).call.apply(e,[this].concat(a)))).state={hasError:!1},n}return Object(pe.a)(t,e),Object(me.a)(t,[{key:"componentDidCatch",value:function(e,t){this.setState({hasError:!0})}},{key:"render",value:function(){return this.state.hasError?s.a.createElement(Oe,null,"Something is wrong here! Please try refresh."):this.props.children}}]),t}(c.PureComponent),je=n(20),Ee=n.n(je),Le=(n(358),function(e){if(e.error)throw new Error("Couldn't load LoadingPage");return s.a.createElement("div",{className:"loadingPage-wrap"},s.a.createElement("div",{className:"lds-spinner"},s.a.createElement("div",null),s.a.createElement("div",null),s.a.createElement("div",null),s.a.createElement("div",null),s.a.createElement("div",null),s.a.createElement("div",null),s.a.createElement("div",null),s.a.createElement("div",null),s.a.createElement("div",null),s.a.createElement("div",null),s.a.createElement("div",null),s.a.createElement("div",null)))}),we=Ee()({loader:function(){return Promise.all([n.e(0),n.e(5)]).then(n.bind(null,885))},loading:Le}),Ie=Ee()({loader:function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(15)]).then(n.bind(null,869))},loading:Le}),Se=Ee()({loader:function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(11)]).then(n.bind(null,876))},loading:Le}),_e=Ee()({loader:function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(13)]).then(n.bind(null,886))},loading:Le}),xe=Ee()({loader:function(){return Promise.all([n.e(0),n.e(1),n.e(3),n.e(2),n.e(12)]).then(n.bind(null,878))},loading:Le}),Ae=Ee()({loader:function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(17)]).then(n.bind(null,887))},loading:Le}),Ce=Ee()({loader:function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(4),n.e(16)]).then(n.bind(null,888))},loading:Le}),ke=Ee()({loader:function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(4),n.e(18)]).then(n.bind(null,889))},loading:Le}),ye=Ee()({loader:function(){return Promise.all([n.e(0),n.e(1),n.e(3),n.e(19),n.e(9)]).then(n.bind(null,880))},loading:Le}),Re=Ee()({loader:function(){return Promise.all([n.e(0),n.e(1),n.e(3),n.e(2),n.e(10)]).then(n.bind(null,881))},loading:Le}),Pe=Ee()({loader:function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(14)]).then(n.bind(null,890))},loading:Le}),Ue=function(){return s.a.createElement(ve,null,s.a.createElement(ue.Switch,null,s.a.createElement(ue.Redirect,{exact:!0,from:"/",to:"/book"}),s.a.createElement(he,{path:"/book",exact:!0,component:Se}),s.a.createElement(he,{path:"/book/:id",exact:!0,component:_e}),s.a.createElement(he,{path:"/word",exact:!0,component:xe}),s.a.createElement(he,{path:"/todo",exact:!0,component:Ce}),s.a.createElement(he,{path:"/todo/daily",exact:!0,component:ke}),s.a.createElement(he,{path:"/todo/history",exact:!0,component:ye}),s.a.createElement(he,{path:"/diary",exact:!0,component:Re}),s.a.createElement(he,{path:"/diary/:id",exact:!0,component:Pe}),s.a.createElement(he,{path:"/word/:id",exact:!0,component:Ae}),s.a.createElement(ue.Route,{path:"/welcome",exact:!0,component:Ie}),s.a.createElement(ue.Route,{component:we})))},Te=s.a.createContext(null),Ne=G.a,Ge=Object(d.b)();function We(){return(We=Object(o.a)(i.a.mark(function e(){var t,n,r;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=oe(Ge),n=document.getElementById("root"),r=function(){return l.a.render(s.a.createElement(h.Provider,{store:t},s.a.createElement(m.PersistGate,{loading:s.a.createElement("div",null),persistor:t.persistor},s.a.createElement(f.ConnectedRouter,{history:Ge},s.a.createElement(Te.Provider,{value:Ne},s.a.createElement(Ue,null))))),n)},Ne.onIdTokenListener(),r();case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}!function(){We.apply(this,arguments)}(),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("","/service-worker.js");ce?function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):se(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e):se(e)})}}()},36:function(e,t,n){"use strict";var r=n(154),a=n(82),i=Object(r.create)({baseURL:"http://localhost:5000",headers:{Accept:"application/json","Content-Type":"application/json","Access-Control-Allow-Origin":"*",Authorization:Object(a.a)()},timeout:3e3});t.a=i},44:function(e,t,n){"use strict";var r=n(6),a=n(60),i=n(30),o=n(42),c=new(function(){function e(){Object(i.a)(this,e),this._emitChange=null,this._reducers={}}return Object(o.a)(e,[{key:"getReducers",value:function(){return Object(a.a)({},this._reducers)}},{key:"register",value:function(e,t){this._reducers[e]||(this._reducers=Object(a.a)({},this._reducers,Object(r.a)({},e,t)),this._emitChange&&this._emitChange(this.getReducers()))}},{key:"setChangeListener",value:function(e){this._emitChange=e}}]),e}());t.a=c},52:function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"b",function(){return i});var r=n(9),a=Object(r.fromJS)({modal:null,isLoadingAction:!1}),i="modal"},82:function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"a",function(){return a});var r=function(e){return localStorage.setItem("auth",e)},a=function(){return localStorage.getItem("auth")}},84:function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"b",function(){return i});var r=n(9),a=Object(r.fromJS)({items:[],isLoadingItems:!1,item:{},isLoadingItem:!1,filter:{status:"reading"}}),i="book"},85:function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"b",function(){return i});var r=n(9),a=Object(r.fromJS)({items:[],isLoadingItems:!1,filter:{isRecall:!1},item:{},isLoadingItem:!1,isLoadingCheck:{}}),i="word"},86:function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"b",function(){return i});var r=n(9),a=Object(r.fromJS)({todos:[],isLoadingTodos:!1,dailyTodos:[],isLoadingDaily:!1,histories:[],isLoadingHistory:!1,isLoadingAction:!1,isLoadingCheck:{},historyFilter:{page:1,limit:10},historyPages:0}),i="todo"},87:function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"b",function(){return i});var r=n(9),a=Object(r.fromJS)({items:[],isLoadingItems:!1,filter:{page:1,limit:10},totalPages:0,item:{},isLoadingItem:!1}),i="diary"},88:function(e,t,n){"use strict";var r=n(6),a=n(60),i=n(30),o=n(42),c=new(function(){function e(){Object(i.a)(this,e),this._emitChange=null,this._sagas={}}return Object(o.a)(e,[{key:"register",value:function(e,t){this._sagas[e]||(this._sagas=Object(a.a)({},this._sagas,Object(r.a)({},e,t)),this._emitChange&&this._emitChange(t))}},{key:"setChangeListener",value:function(e){this._emitChange=e}}]),e}());t.a=c}},[[161,7,8]]]);
//# sourceMappingURL=main.40ac678b.chunk.js.map